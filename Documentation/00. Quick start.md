# Quick start

This guide provides a comprehensive overview for getting the Anthology extension running, assuming you have an existing TYPO3 model you wish to display.

## 1. Installation

Install the extension via Composer:

```bash
composer require liquidlight/typo3-anthology
```

## 2. TypoScript Configuration

For the extension to function, you must include its static TypoScript and register your model's repository.

Create or edit `Configuration/TypoScript/setup.typoscript` in your site package:

```typoscript
# Include the base TypoScript
@import 'EXT:ll_anthology/Configuration/TypoScript/setup'

# Register your model's repository
plugin.tx_llanthology {
    settings {
        repositories {
            tx_myextension_domain_model_item = Vendor\MyExtension\Domain\Repository\ItemRepository
        }
    }
}
```

- The key (`tx_myextension_domain_model_item`) **must** be the name of your database table.
- The value **must** be the fully qualified class name of your repository.

Then, ensure this TypoScript file is included in your site's main template.

## 3. Add and Configure the Plugin

1. Navigate to the **Page** module and add the **Anthology** content element from the **Plugins** tab.
2. Configure the plugin settings:

   **General Tab**
   - **Mode**: Choose `List` for the main view or `Single` for a detail page.
   - **Model name**: Select your model (e.g., "My Extension Items"). This list is populated based on your TypoScript configuration.
   - **Single View Page**: For a `List` plugin, link to the page where the `Single` view is located.

   **Display Tab**
   - **Items Per Page**: Set the number of items for pagination (e.g., `10`).
   - **Enable Pagination**: Activate or deactivate the pagination.

   **Filters Tab**
   - Assign pre-configured filter records to the plugin.

## 4. Routing (for Detail Pages)

To create user-friendly URLs for your detail pages, add a route enhancer to your site's `config.yaml`:

```yaml
routeEnhancers:
  # Single view with slug-based URLs
  ItemSingle:
    type: Extbase
    limitToPages:
      - 123  # Your single view page UID
    extension: LlAnthology
    plugin: AnthologyView
    routes:
      # Single record by slug
      - routePath: '/{record}'
        _controller: 'Anthology::single'
    defaultController: 'Anthology::view'
    aspects:
      record:
        type: PersistedAliasMapper
        tableName: tx_myextension_domain_model_item
        routeFieldName: slug
```

This requires a `slug` field in your model's table.

For further information, and to add pagination route enhancers to the list view, refer to the [Routing](./20.%20Routing.md) documentation.

## 5. Sitemap

To include your detail pages in the XML sitemap, add a sitemap provider to your TypoScript:

```typoscript
plugin.tx_seo.config.xmlSitemap.sitemaps {
    my_items {
        provider = TYPO3\CMS\Seo\XmlSitemap\RecordsXmlSitemapDataProvider
        config {
            table = tx_myextension_domain_model_item
            sortField = crdate
            lastModifiedField = tstamp
            pid = 123  # Storage page UID
            url {
                pageId = 456  # Single view page UID
                fieldToParameterMap {
                    uid = tx_llanthology_anthologyview[record]
                }
                additionalGetParameters {
                    tx_llanthology_anthologyview.action = single
                    tx_llanthology_anthologyview.controller = Anthology
                }
            }
        }
    }
}
```

See the [Adding sitemap items](30.%20Adding%20sitemap%20items.md) guide for more details.

## 6. Templates

The extension will automatically use templates from your model's extension directory. To override a template, copy it from `ll_anthology/Resources/Private/` to the corresponding path in your own extension (e.g., `my_extension/Resources/Private/Partials/List/Record.html`) and modify it.
